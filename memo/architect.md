# ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®ãƒ¬ã‚¤ãƒ¤ãƒ¼æ§‹æˆã«ã¤ã„ã¦

æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€è²¬å‹™ã®åˆ†é›¢ã‚’å¾¹åº•ã™ã‚‹ãŸã‚ã€ä»¥ä¸‹ã® 3 å±¤ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚

---

## ğŸ”¹ API å±¤ï¼ˆPresentation Layer / Interface Layerï¼‰

### å½¹å‰²ï¼š

ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚„ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã€å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ï¼‰ã¨ã®æ¥ç‚¹ã¨ãªã‚‹å±¤ã€‚HTTP ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å—ã‘å–ã‚Šã€ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¡Œã„ã€ã‚µãƒ¼ãƒ“ã‚¹å±¤ã«å‡¦ç†ã‚’å§”è­²ã—ã¾ã™ã€‚

### ä¸»ãªè²¬å‹™ï¼š

- FastAPI ãªã©ã§ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã¨ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®å®šç¾©
- å…¥å‡ºåŠ›ã®ã‚¹ã‚­ãƒ¼ãƒãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆPydantic ãƒ¢ãƒ‡ãƒ«ãªã©ï¼‰
- HTTP ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ã‚„ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®æ•´å½¢
- JWT èªè¨¼ãªã©ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆå‰å‡¦ç†ï¼ˆDependsï¼‰

### ä¾‹ï¼š

```python
@app.get("/users/{user_id}")
def get_user(user_id: str, service: UserService = Depends(...)):
    return service.get_user(user_id)
```

---

## ğŸ”¹ ã‚µãƒ¼ãƒ“ã‚¹å±¤ï¼ˆUse Case / Application Layerï¼‰

### å½¹å‰²ï¼š

ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã‚’é›†ç´„ã™ã‚‹å±¤ã€‚API å±¤ã¨ãƒªãƒã‚¸ãƒˆãƒªå±¤ã®é–“ã‚’æ©‹æ¸¡ã—ã—ã€ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹å˜ä½ã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®æŒ¯ã‚‹èˆã„ã‚’å®šç¾©ã—ã¾ã™ã€‚

### ä¸»ãªè²¬å‹™ï¼š

- ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«ãƒ»ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã®å®Ÿè£…ï¼ˆä¾‹: ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ã€ãƒ­ã‚°æ¤œç´¢ï¼‰
- ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã®ç®¡ç†ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰
- ãƒªãƒã‚¸ãƒˆãƒªã‚„ä»–ã‚µãƒ¼ãƒ“ã‚¹ã‚’çµ±åˆã—ã¦ç›®çš„ã®å‡¦ç†ã‚’æ§‹æˆ

### ä¾‹ï¼š

```python
class UserService:
    def __init__(self, user_repo: UserRepository):
        self.user_repo = user_repo

    def get_user(self, user_id: str) -> dict:
        user = self.user_repo.find_by_id(user_id)
        if not user:
            raise NotFoundError("User not found")
        return user
```

---

## ğŸ”¹ ãƒªãƒã‚¸ãƒˆãƒªå±¤ï¼ˆInfrastructure / Data Access Layerï¼‰

### å½¹å‰²ï¼š

ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚„å¤–éƒ¨ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã¨ã®ã‚„ã‚Šå–ã‚Šã‚’æ‹…ã†å±¤ã€‚å®Ÿéš›ã® CRUDï¼ˆCreate, Read, Update, Deleteï¼‰å‡¦ç†ã‚’è¡Œã„ã¾ã™ã€‚

### ä¸»ãªè²¬å‹™ï¼š

- DynamoDB / PostgreSQL / Redis ãªã©ã¸ã®ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹
- ORM ã‚„ã‚¯ã‚¨ãƒªãƒ“ãƒ«ãƒ€ã®ä½¿ç”¨
- ãƒ‡ãƒ¼ã‚¿å–å¾—ãƒ»ä¿å­˜ã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’æŠ½è±¡åŒ–

### ä¾‹ï¼š

```python
class UserRepository:
    def find_by_id(self, user_id: str) -> Optional[dict]:
        response = dynamodb.get_item(
            TableName="users",
            Key={"user_id": {"S": user_id}}
        )
        return response.get("Item")
```

---

## ğŸ§­ ãƒ¬ã‚¤ãƒ¤ãƒ¼é–“ã®é–¢ä¿‚å›³

```
[ APIå±¤ ]
   â†“ å‘¼ã³å‡ºã—
[ ã‚µãƒ¼ãƒ“ã‚¹å±¤ ]
   â†“ å‘¼ã³å‡ºã—
[ ãƒªãƒã‚¸ãƒˆãƒªå±¤ ]
   â†“
[ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ ]
```
